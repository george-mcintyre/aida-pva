<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AIDA-PVA: Anatomy of our CHANNELS.YML file</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="aida-pva-logo-small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AIDA-PVA<span id="projectnumber">&#160;2.0</span>
   </div>
   <div id="projectbrief">AIDA-PVA is the latest version of the AIDA framework.  Built on top of EPICS 7 it enables client applications to programmatically access and manage any device or database on the SLAC Network using simple channel names.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Anatomy of our CHANNELS.YML file </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a href="channels.yml"><img src="channels.png" alt="" class="inline" title="Anatomy of CHANNELS.YML"/></a></p><ol type="1">
<li>Always add the annotation <code>!!edu.stanford.slac.aida.lib.model.AidaProvider</code> to the beginning of the yaml file so that the processor will recognise the type of yaml file you're providing.</li>
<li>You can place comments anywhere you want by preceding them by a hash character</li>
<li>You must provide an identifier for your <code>Channel Provider</code>. This usually corresponds to the Service ID from the Oracle Database for the <code>Channel Provider</code> you are implementing.</li>
<li>You must provide a name for the <code>Channel Provider</code>. Note that strings can be entered in yaml files without quotes, but if you're including some non-standard characters you may want to surround them with double quotes</li>
<li>You <b>must</b> add a description but in this version of AIDA-PVA it is not used</li>
<li>You <b>must</b> add a default <code>Getter</code> configuration. <code>Getter</code> configurations control how <code>get</code> requests to a channel are handled i.e. what data will they return. So specifying a default <code>Getter</code> configuration means that any <code>Channel</code> that does not provide a <code>Getter</code> configuration will be assumed to return this default configuration.</li>
<li>In our example we set the default <code>Getter</code> configuration to <code>INTEGER</code>. This means that any <code>Channel</code> that does not provide a specific <code>Getter</code> configuration will return <code>INTEGER</code>. In addition to the other scalar types, and scalar array types, you could also use the following:<ol type="a">
<li><b>TABLE</b> - This means that by default all channels will return a table. If you specify <code>TABLE</code> you must specify fields that the table will contain.</li>
<li><b>NONE</b> - This means that by default all channels will return an <code>UnsupportedChannelException</code> when a <code>get</code> operation is attempted.</li>
<li><b>ANY</b> - This means that any <code>get</code> operation is permitted, and the client will be required to provide a <code>TYPE</code> argument to determine which one to use. If you will be supporting <code>TABLE</code> requests then you must provide a <code>fields</code> section below to define the fields that the table will contain.</li>
<li><b>SCALAR</b> - This means that any <em>scalar</em> <code>get</code> operation or <code>TABLE</code> is permitted and the client will be required to provide a <code>TYPE</code> argument to determine which one to use. If you will be supporting <code>TABLE</code> requests then you must provide a <code>fields</code> section to define the fields that the table will contain.</li>
<li><b>SCALAR_ARRAY</b> - This means that any <em>scalar array</em> <code>get</code> operation or <code>TABLE</code> is permitted and the client will be required to provide a <code>TYPE</code> argument to determine which one to use. If you will be supporting <code>TABLE</code> requests then you must provide a <code>fields</code> section to define the fields that the table will contain.</li>
</ol>
</li>
<li>The default <code>Setter</code> config is optional. By default, if it is not included, it means that no setter operations will be permitted. <br  />
</li>
<li>If you provide a <code>Setter</code> config, the values can only be one of the following:<ol type="a">
<li><b>VOID</b> - This means that the <code>Setter</code> will not return any results</li>
<li><b>TABLE</b> - This means that the <code>Setter</code> will return a table, and you must provide a <code>fields</code> section to define the fields that the table will contain.</li>
<li><b>NONE</b> - equivalent to the default</li>
</ol>
</li>
<li>In our example we have defined a default setter configuration as TABLE so we need to define a fields section. The fields section contains a list of fields which are defined by <code>name</code>, <code>label</code>, and <code>description</code> entries. There are other elements that are included in the Normative Type specification such as <code>units</code> and <code>unit label</code>, but they are not yet supported by AIDA-PVA.</li>
<li>field <b>name</b> - This defines the field name as it will appear in the <code>Normative Type</code> <code>NTTable</code> structure returned to the user</li>
<li>field <b>label</b> - This defines the field name as it will appear in the <code>Normative Type</code> <code>NTTable</code> structure returned to the user</li>
<li>field <b>description</b> - This defines the field name as it will appear in the <code>Normative Type</code> <code>NTTable</code> structure returned to the user. This field is currently not passed back to the client side. In future version of AIDA-PVA it will so you should enter a value here.</li>
<li>The channels section lists the <code>Channels</code> that the <code>Channel Provider</code> supports. You can list the <code>Channels</code> exhaustively or by using wildcards. <b>Very Important Note</b>: The <code>Channels</code> listed here should be distinct from <code>Channels</code> supported by other <code>Channel Provider</code> implementations. If there is overlap then the EPICS framework will choose the first <code>Channel Provider</code> to respond to the first request to this channel until that <code>Channel Provider</code> no longer responds. For example, the SLC Orbit Database <code>Channel Provider</code> supports many channel names that are supported by other Channel Providers. This means that some times the SLC Orbit Database <code>Channel Provider</code> will respond and sometimes the other <code>Channel Provider</code> will respond, leading to unreliable responses. It is expected that future versions of AIDA-PVA will differentiate requests based on the <code>Getter</code> and <code>Setter</code> configurations, so that, for example, the SLC Orbit Database <code>Channel Provider</code> could support <code>get</code> requests on a channel while another <code>Channel Provider</code> supports <code>set</code> the requests. For the moment the AIDA-PVA framework uses only the channel name to route requests. <br  />
</li>
<li>In this example the channel does not provide a <code>Getter</code> or <code>Setter</code> configuration, so it will use the defaults defined above. A <code>Channel</code> must provide a way to identify all requests that it references. It can do this by providing the name verbatim, or by employing one or more wildcards. The example given uses wildcards so that it matches all requests that start with "`AIDA:CHAN:`" and end in "`:INT`" for example "`AIDA:CHAN:P01:INT`". The possible wildcards are:<ol type="a">
<li><code>*</code> - matches any string of characters</li>
<li><code>?</code> - matches a single character</li>
</ol>
</li>
<li>This example lists the <code>Channel</code> name verbatim,</li>
<li>but it also provides a <code>Getter</code> configuration, overriding the default configuration and specifying that this <code>Channel</code> will return booleans.</li>
<li>This <code>Channel</code> configuration uses the <code>?</code> wildcard to specify the requests it will respond to.</li>
<li>This <code>Channel</code> is configured to respond to requests with string arrays</li>
<li>And this <code>Channel</code> is configured to respond with a table</li>
<li>Note that a <code>get</code> request will return integers for this <code>Channel</code> as per the default configuration.</li>
<li>You can define or override <code>Setter</code> configuration for channels like this.</li>
<li>Here it is defined to return nothing instead of a table that was configured as a default.</li>
<li>This <code>Channel</code> will use defaults for both <code>Getter</code> and <code>Setter</code></li>
<li>And finally this <code>Channel</code> will override the default configuration and return a different table. </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
